---
plugin: amazon.aws.aws_ec2
regions:
  - us-east-1

# Filter for webserver and monitoring-node instances
filters:
  "tag:Name":
    - "webserver*"
    - "monitoring-node"

# Use public IP for SSH connectivity from GitHub Actions
hostnames:
  - public-ip-address

# Create groups based on instance tags
groups:
  webservers: "'webserver' in tags.Name"
  monitoring: "tags.Name == 'monitoring-node'"

# Compose variables for Ansible
compose:
  ansible_host: public_ip_address
  ansible_user: ubuntu
